<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>é€‰æ‹©é¢˜ç³»ç»Ÿ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .dark-theme {
        background-color: #012;
        color: #fff;
    }
    .container {
      display: flex;
      width: 100%;
      max-width: 1000px;
    }
    .left {
      flex: 2;
      padding-right: 20px;
    }
    .right {
      flex: 1;
      border-left: 2px solid #ccc;
      padding-left: 20px;
    }
    .question {
      font-size: 20px;
      margin-bottom: 20px;
    }
    table {
      font-size: 16px;
    }
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px; /* æŒ‰é’®é—´è·ï¼Œå¯è°ƒæ•´ */
      align-items: center;
    }

    .options button {
      display: block;
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      font-size: 16px;
      border: 2px solid #ccc;
      border-radius: 5px;
      background-color: white;
      cursor: pointer;
    }
    .correct {
      background-color: #c8f7c5 !important;
      border-color: green;
    }
    .wrong {
      background-color: #f7c5c5 !important;
      border-color: red;
    }
    .correct-sort {
      background-color: #c8f7c5 !important;
      border-color: green;
    }
    .wrong-sort {
      background-color: #f7c5c5 !important;
      border-color: red;
    }
    .dark-theme .correct-sort {
      background-color: rgba(13, 82, 58, 0.591) !important;
      border: 2px solid rgb(49, 162, 132);
    }
    .dark-theme .wrong-sort {
      background-color: rgb(66, 0, 0) !important;
    }
    .navigation {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
    }
    .analysis-button {
      visibility: hidden;
      font-size: 16px;
      border: none !important;
      outline: none;
      padding: 5px 30px 5px 30px;
      background: #ce9be3;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      -webkit-box-shadow: 4px 4px 8px 2px rgba(200, 211, 227, 0.3),
        -2px -2px 4px 1px rgba(181, 192, 227, 0.2);
      box-shadow: 4px 4px 8px 2px rgba(200, 211, 227, 0.3),
        -2px -2px 4px 1px rgba(181, 192, 227, 0.2);
      -webkit-transition: all 0.1s ease-in-out;
      -o-transition: all 0.1s ease-in-out;
      transition: all 0.1s ease-in-out;
      margin: 0 5px; /* å·¦å³é—´è· 5px */
    }
    .analysis-button:hover {
      -webkit-box-shadow: 4px 4px 8px 3px rgba(200, 211, 227, 0.5),
        -2px -2px 4px 1px rgba(181, 192, 227, 0.4);
      box-shadow: 4px 4px 8px 3px rgba(200, 211, 227, 0.5),
        -2px -2px 4px 1px rgba(181, 192, 227, 0.4);
    }
    .analysis-text {
      white-space: pre-wrap;
      font-size: 15px;
      background: #f5f5f5;
      padding: 10px;
      border-radius: 6px;
    }
    .dark-theme .analysis-text {
      background: #0B0B0B;
    }
    .start-screen {
      max-width: 800px;
    }
    .theme-base-button{
      font-size: 16px;
      border: none !important;
      outline: none;
      padding: 5px 30px 5px 30px;
      background: #0984e3;
      background: -o-linear-gradient(70deg, #0984e3 0%, #5dc5f8 120%);
      background: linear-gradient(20deg, #0984e3 0%, #5dc5f8 120%);
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      -webkit-box-shadow: 4px 4px 8px 2px rgba(9, 133, 227, 0.3),
        -2px -2px 4px 1px rgba(9, 133, 227, 0.2);
      box-shadow: 4px 4px 8px 2px rgba(9, 133, 227, 0.3),
        -2px -2px 4px 1px rgba(9, 133, 227, 0.2);
      -webkit-transition: all 0.1s ease-in-out;
      -o-transition: all 0.1s ease-in-out;
      transition: all 0.1s ease-in-out;
      margin: 0 5px; /* å·¦å³é—´è· 5px */
    }

    .theme-base-button:hover {
      -webkit-box-shadow: 4px 4px 8px 3px rgba(9, 133, 227, 0.5),
        -2px -2px 4px 1px rgba(9, 133, 227, 0.4);
      box-shadow: 4px 4px 8px 3px rgba(9, 133, 227, 0.5),
        -2px -2px 4px 1px rgba(9, 133, 227, 0.4);
    }

    /* åŸºæœ¬é‡ç½® */
    select {
      /*-webkit-appearance: none;*/ /* ç§»é™¤é»˜è®¤çš„ä¸‹æ‹‰ç®­å¤´ */
      /*-moz-appearance: none;*/
      /*appearance: none;*/
      outline: none;
      border: 1px solid #ccc;
      border-radius: 4px;
      background-color: #fff;
      padding: 8px 12px;
      font-size: 16px;
      color: #333;
      width: 200px;
      cursor: pointer;
      transition: border-color 0.3s ease;
    }

    /* ç¦ç”¨é€‰é¡¹çš„æ ·å¼ */
    select option[disabled] {
      color: #999;
    }

    #questionText {
      white-space: pre-wrap; /* è§£å†³é—®é¢˜ä¸­å«æœ‰æ¢è¡Œç¬¦"\nâ€œçš„æ—¶å€™ï¼Œæ¸²æŸ“ä¸ä¼šæ¢è¡Œ*/
    }

    .nav-btn {
      width: 36px;
      height: 36px;
      margin: 2px;
      background-color: #eee;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
    }

    .nav-btn.correct {
      background-color: #c8f7c5;
      border-color: green;
    }

    .nav-btn.wrong {
      background-color: #f7c5c5;
      border-color: red;
    }

    .annotated-word {
      color: #122e73;
      cursor: pointer;
      text-decoration: underline;
      text-decoration-thickness: 0.6px; /* æ›´ç»† */
      text-underline-offset: 4px; /* ä¸‹åˆ’çº¿ä¸æ–‡å­—çš„è·ç¦» */
      padding-right: 2px;
      padding-left: 2px;
    }

    .dark-theme .annotated-word {
      color: rgb(160,245,235);
      cursor: pointer;
    }

    #languageSelect {
      padding: 2px 6px;
      font-size: 14px;
      border-radius: 4px;
      border: 1px solid #ccc;
      background-color: white;
      color: #333;
    }

    .theme-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 26px;
    }

    .theme-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      background-color: #ccc;
      border-radius: 34px;
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      transition: 0.4s;
    }

    .slider::before {
      position: absolute;
      content: "ğŸŒ";
      height: 20px;
      width: 20px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      border-radius: 50%;
      transition: 0.4s;
      text-align: center;
      line-height: 20px;
      font-size: 14px;
    }

    input:checked + .slider {
      background-color: #666;
    }

    input:checked + .slider::before {
      transform: translateX(24px);
      content: "ğŸŒ™";
    }

    .match-card.matched {
      background-color: #e0ffe0;
      border-color: rgb(34, 179, 34);
      cursor: default;
    }

    .word-card.selected {
      background-color: rgb(198, 235, 250);
      border-color: #0984e3;
    }

    .dark-theme .word-card.selected {
      background-color: #0f2740c8;
      border-color: #5dc5f8;
    }

    .word-card {
      width: 50%;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 16px;
      background-color: white;
      border-radius: 8px;
      box-sizing: border-box;
      border: 1px solid #aaa;
    }

    .dark-theme .word-card {
      background-color: black;
    }

    .dark-theme .meaning-card {
      background-color: black;
    }

    .correct_match{
      background-color: #c9f7c5 !important;
      border: 2px solid rgb(17, 106, 17) !important;
      animation: correct-match-animation 0.8s forwards !important;
      pointer-events: none; /* é˜»æ­¢æ‰€æœ‰é¼ æ ‡äº‹ä»¶ */
    }

    @keyframes shake-wrong {
      0% { background-color: rgb(255,230,230); border-color: red; }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-6px); }
      80% { transform: translateX(6px); }
      100% { background-color: white; border-color: #aaa; transform: none; }
    }

    @keyframes shake-wrong-dark {
      0% { background-color: rgb(66,0,0); border-color: red; color: #fff; }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-6px); }
      80% { transform: translateX(6px); }
      100% { background-color: #000; border-color: #aaa; color: #fff; transform: none; }
    }

    .wrong_match{
      animation: shake-wrong 0.5s;
      background-color: rgb(255, 230, 230);
      border: 2px solid red;
    }

    .dark-theme .correct_match{
      background-color: rgba(13, 82, 58, 0.373) !important;
      border: 2px solid rgb(49, 162, 132) !important;
    }

    @keyframes correct-match-animation {
        40% {
            opacity: 1;
        }
        50% {
            opacity: 1;
        }
        100% {
            opacity: 0.6;
        }
    }

    .dark-theme .wrong_match{
      animation: shake-wrong-dark 0.5s;
      background-color: rgb(66, 0, 0);
      border: 2px solid red;
    }

    .circle-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%; /* ä½¿æŒ‰é’®å˜ä¸ºåœ†å½¢ */
      border: none;
      background-color: #bcd49c; /* æŒ‰é’®èƒŒæ™¯é¢œè‰² */
      color: white; /* æŒ‰é’®æ–‡å­—é¢œè‰² */
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      line-height: 50px; /* è®©æ–‡å­—å‚ç›´å±…ä¸­ */
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25);
    }
    .dark-theme .circle-btn {
      background-color: rgba(0, 0, 0, 0); /* æŒ‰é’®èƒŒæ™¯é¢œè‰² */
      box-shadow: 0 7px 14px rgba(63, 209, 202, 0.35), 0 0 0 3px #bcd49c;
    }

    #homeBtn {
      border: none;
      background-color: #f0f0f0;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .dark-theme #homeBtn {
      box-shadow: 0 7px 14px rgba(63, 209, 202, 0.35), 0 0 0 3px #bcd49c;
    }

    #homeBtn2 {
      border: none;
      background-color: #f0f0f0;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .dark-theme #homeBtn2 {
      box-shadow: 0 7px 14px rgba(63, 209, 202, 0.35), 0 0 0 3px #bcd49c;
    }

    .split-layout {
      display: flex;
      height: 100%;
    }

    /* å·¦ä¾§æ  */
    .sidebar {
      width: 240px;
      background-color: #f8f9fa;
      border-right: 1px solid #ddd;
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
      border-radius: 10px;
    }

    /* å·¦ä¾§æ  */
    .dark-theme .sidebar {
      background-color: #00354634;
    }

    .sidebar h3 {
      margin-bottom: 10px;
      font-size: 16px;
    }

    .book-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .book-list li {
      padding: 8px 12px;
      cursor: pointer;
      border-radius: 6px;
      transition: background-color 0.2s;
    }

    .dark-theme .book-list li {
      color: #88b2da
    }

    .dark-theme .book-list li:hover {
      background-color: #e0f0ff54;
    }

    .book-list li:hover {
      background-color: #e0f0ff;
    }

    .book-list li.active {
      background-color: #cce5ff;
      font-weight: bold;
    }

    .dark-theme .book-list li.active {
      background-color: #6bd4bd;
      color: #2969a5; 
      background-image: linear-gradient(to top right, rgba(176, 233, 220, 0.7), #48bda3);
    }
    

    /* å³ä¾§å†…å®¹ */
    .content {
      width: 500px;
      padding: 20px;
      overflow-y: auto;
    }

    .unit-list {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .unit-list li {
      display: flex;
      align-items: center;
      min-height: 24px; /* å¯æ ¹æ®å®é™…è°ƒæ•´ */
      padding: 8px 12px;
      border: 1px solid #ddd;
      margin-bottom: 8px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .unit-list li:hover {
      background-color: #f0f8ff;
    }

    .dark-theme .unit-list li:hover {
      background-color: #f0f8ff3b;
    }

    .unit-list li.active {
      background-color: #d6ecff;
      border-color: #339af0;
    }

    .dark-theme .unit-list li.active {
      background-color: #102b47;
      border-color: #5dc5f8;
    }
    
    .sort-card{
        display: inline-block;
        width: auto !important;
        padding: 8px 20px; /* å·¦å³paddingæ§åˆ¶å®½åº¦ç¨å¾®å®½ä¸€ç‚¹ */
        font-size: 18px;
        transition: box-shadow 0.2s;
    }

    .sort-card-selected{
        display: inline-block;
        background-color: #eee;
        width: auto !important;
        padding: 8px 12px; /* å·¦å³paddingæ§åˆ¶å®½åº¦ç¨å¾®å®½ä¸€ç‚¹ */
        font-size: 18px;
        border-radius:  10px; /* æ·»åŠ åœ†è§’çŸ©å½¢æ•ˆæœ */
        transition: box-shadow 0.2s;
        margin:0 4px;
    }

    .dark-theme .sort-card-selected{
        background-color: #102b47;
        color: #fff;
        border: 1px solid white; /* æ·»åŠ è¾¹ç•Œçº¿å¹¶è®¾ç½®é¢œè‰² */
    }

  </style>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="book_list.js"></script>
  <script src="BlueBook_N3.js"></script>
  <script src="BlueBook_N2.js"></script>
  <script src="Simulate_N3.js"></script>
  <script src="JLPT_Test.js"></script>
  <script src="IT_PASSPORT_OFFICIAL.js"></script>
  <script src="Word.js"></script>
</head>
<body>
  <div id="navigationBar" style="position: absolute; top: 10px; right: 10px; display: flex; gap: 16px; align-items: center;">
    <label class="theme-switch">
      <input type="checkbox" id="themeToggleSwitch" onchange="toggleTheme()" />
      <span class="slider"></span>
    </label>
    <select id="languageSelect" onchange="changeLanguage()" style="padding: 3px 6px; font-size: 14px; border-radius: 4px; width: 105px;">
      <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
      <option value="en">ğŸ‡¬ğŸ‡§ EN</option>
      <option value="jp">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
    </select>
  </div>

  <!-- é¦–é¡µç•Œé¢ -->
  <div id="startScreen" class="split-layout">
    <!-- å·¦ä¾§ä¹¦ç±åˆ—è¡¨ -->
    <div class="sidebar">
      <h3 id="selectedBookTitle"></h3>
      <ul id="bookList" class="book-list"></ul>
      <button onclick="startQuiz()" class="theme-base-button" style="margin-top: 20px;">å¼€å§‹ç­”é¢˜</button>
    </div>

    <!-- å³ä¾§å•å…ƒ -->
    <div class="content">
      <h3 id="selectedUnitTitle">ğŸ“– </h3>
      <ul id="unitList" class="unit-list"></ul>
    </div>
  </div>

  <div class="container" id="quizScreen" style="display:none;">
    <div class="left">
      <div class="question" id="questionText"></div>
      <div class="options" id="optionsContainer"></div>
      <div class="navigation">
        <button id="prevBtn" onclick="prevQuestion()" class="theme-base-button">â† ä¸Šä¸€é¢˜</button>
        <button id="analysisBtn" class="analysis-button" onclick="showAnalysis()">æŸ¥çœ‹è§£æ</button>
        <button id="sortSubmitBtn" class="theme-base-button" onclick="checkSortAnswer()">ç¡®è®¤</button>
        <button id="nextBtn" onclick="nextQuestion()" class="theme-base-button">ä¸‹ä¸€é¢˜ â†’</button>
      </div>
    </div>
    <div class="right">
      <div style="display: flex; justify-content: space-between; align-items: right;">
        <button id="homeBtn" onclick="goBackToStart()">
          <i class="fas fa-home"></i>
        </button>
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3>è§£æ</h3>
      </div>
      <div class="analysis-text" id="analysisText">
        è¯·é€‰æ‹©é€‰é¡¹åç‚¹å‡»â€œæŸ¥çœ‹è§£æâ€ä»¥æ˜¾ç¤ºå†…å®¹ã€‚
      </div>
    </div>
  </div>
  <div id="questionNav" style="margin-top: 20px; display: grid; grid-template-columns: repeat(20, auto); gap: 8px;"></div>

  <!-- åŒ¹é…é¢˜ç•Œé¢ -->
  <div class="container" id="matchScreen" style="display:none; flex-direction: column; gap: 20px;">
    <div id="matchQuestionText" style="font-size: 20px; font-weight: bold; gap: 40px;"></div>

    <div style="display: flex; justify-content: space-between;">
      <!-- å·¦ä¾§è¯å¡ï¼ˆå¤–è¯­è¯æ±‡ï¼‰ -->
      <div id="matchLeft" style="flex: 1; display: flex; flex-direction: column; gap: 10px;"></div>

      <!-- å³ä¾§è¯å¡ï¼ˆé‡Šä¹‰ï¼‰ -->
      <div id="matchRight" style="flex: 1; display: flex; flex-direction: column; gap: 10px;"></div>
    </div>


    <div style="display:flex; justify-content: flex-end; gap: 15px;">
      <button onclick="resetMatchQuiz()" class="circle-btn">
        <i class="fas fa-arrows-rotate"></i>
      </button>
      <button id="homeBtn2" onclick="goBackToStart()">
        <i class="fas fa-home"></i>
      </button>
    </div>
  </div>
<script src="main.js"></script>
</body>
</html>
